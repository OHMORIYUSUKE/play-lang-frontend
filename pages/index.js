import Head from "next/head";
import Image from "next/image";
import styles from "../styles/Home.module.css";

import { useRecoilState, useRecoilValue } from "recoil";
import { userState } from "../components/store/Auth/auth";

import { textState } from "../components/store/Auth/editor";

import React, { useState, useEffect, useRef } from "react";

import Editor from "@monaco-editor/react";

import Grid from "@mui/material/Grid";
import Button from "@mui/material/Button";
import Box from "@mui/material/Box";

export default function Home() {
  useEffect(() => {
    (async () => {
      // apiãªã©ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã—ã¦ã€setUserã§ã‚°ãƒ­ãƒ¼ãƒãƒ«stateã‚’æ›´æ–°ã™ã‚‹
    })();
  }, []);

  //
  const EditordefaultValue = `def main():
    print('Hello World !!')

if __name__ == '__main__':
    main()`;

  //
  const ToPlayBtn = () => {
    return (
      <div
        style={{
          textAlign: "center",
          marginTop: "40px",
          marginBottom: "60px",
        }}
      >
        <Button href="/play" variant="contained" disableElevation size="large">
          è©¦ã—ã¦ã¿ã‚‹ â–¶
        </Button>
      </div>
    );
  };

  const editorRefIn = useRef(null);
  function handleEditorDidMountIn(editor, monaco) {
    editorRefIn.current = editor;
  }
  function submit() {
    window.alert(editorRefIn.current.getValue());
  }

  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Grid container spacing={2} style={{ padding: "0 2em" }}>
        <Grid item xs={6}>
          <h1>ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ã‚ˆã† !! ğŸƒğŸ»</h1>
          <h3>ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãªã—ã§Pythonã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚</h3>
          <Box
            sx={{ bgcolor: "info.light", color: "error.contrastText", p: 2 }}
          >
            <h3>ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã™ã‚‹ã¨...</h3>
            <ul>
              <li>æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã‚’å…±æœ‰ãƒ»ä¿å­˜ã§ãã¾ã™</li>
            </ul>
          </Box>
          <Box
            sx={{ bgcolor: "error.light", color: "error.contrastText", p: 2 }}
          >
            <h5>
              ä»•æ§˜ãŒå¤‰æ›´ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€ãƒ‡ãƒ¼ã‚¿ãŒæ¶ˆãˆã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
            </h5>
          </Box>

          <h3
            style={{
              textAlign: "center",
              marginTop: "30px",
              marginBottom: "30px",
            }}
          >
            å®Ÿè¡Œã§ãã‚‹è¨€èª
          </h3>
          <Grid container spacing={2} style={{ padding: "0 3em" }}></Grid>
          <ToPlayBtn />
        </Grid>
        <Grid item xs={6}>
          <Button onClick={submit}>å†…å®¹</Button>
          <Editor
            height="40vh"
            theme="vs-dark"
            language="python"
            //defaultValue={EditordefaultValue}
            onChange={handleEditorDidMountIn}
            //onMount={handleEditorDidMountIn}
            //options={{ readOnly: "true" }}
          />
          <div
            style={{
              backgroundColor: "#1E1E1E",
              minHeight: "130px",
              padding: "10px",
              position: "relative",
            }}
          >
            <code
              id="outPut"
              style={{
                whiteSpace: "pre-wrap",
                color: "white",
                overflowWrap: "break-word",
              }}
            >
              $ python main.py <br />
              Hello World !!
            </code>
          </div>
          <ToPlayBtn />
        </Grid>
      </Grid>
    </>
  );
}
